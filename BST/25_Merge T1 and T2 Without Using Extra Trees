/*
Problem Statement:
Create two Binary Search Trees T1 and T2 using the given input values (terminated by -1).
Without creating any additional trees, merge all elements of T2 into T1.

After merging:
1. Print preorder traversal of T1.
2. Print inorder traversal of T2.

Sample Input:
5 3 1 6 7 -1
4 2 9 8 -1

Sample Output:
5 3 1 2 4 6 7 9 8
2 4 8 9
*/

#include <iostream>
using namespace std;

struct BinarySearchTreeNode {
    int data;
    BinarySearchTreeNode *leftChild, *rightChild;
};

BinarySearchTreeNode* treeOneRoot = NULL;
BinarySearchTreeNode* treeTwoRoot = NULL;

void insertIntoBST(BinarySearchTreeNode*& rootNode, int value) {
    if (rootNode == NULL) {
        rootNode = new BinarySearchTreeNode;
        rootNode->data = value;
        rootNode->leftChild = NULL;
        rootNode->rightChild = NULL;
        return;
    }
    if (rootNode->data > value)
        insertIntoBST(rootNode->leftChild, value);
    else
        insertIntoBST(rootNode->rightChild, value);
}

void mergeAndPrint(BinarySearchTreeNode*& treeOneRoot, BinarySearchTreeNode* treeTwoRoot, int mode) {

    if (mode == -1) {
        mergeAndPrint(treeOneRoot, treeTwoRoot, 0);   // merge T2 into T1
        mergeAndPrint(treeOneRoot, treeTwoRoot, 2);   // preorder of T1
        cout << endl;
        mergeAndPrint(treeOneRoot, treeTwoRoot, 1);   // inorder of T2
        return;
    }

    if (mode == 0) {   // merge
        if (treeTwoRoot == NULL) return;
        insertIntoBST(treeOneRoot, treeTwoRoot->data);
        mergeAndPrint(treeOneRoot, treeTwoRoot->leftChild, 0);
        mergeAndPrint(treeOneRoot, treeTwoRoot->rightChild, 0);
    }

    if (mode == 1) {   // inorder traversal of T2
        if (treeTwoRoot == NULL) return;
        mergeAndPrint(treeOneRoot, treeTwoRoot->leftChild, 1);
        cout << treeTwoRoot->data << " ";
        mergeAndPrint(treeOneRoot, treeTwoRoot->rightChild, 1);
    }

    if (mode == 2) {   // preorder traversal of T1
        if (treeOneRoot == NULL) return;
        cout << treeOneRoot->data << " ";
        mergeAndPrint(treeOneRoot->leftChild, treeTwoRoot, 2);
        mergeAndPrint(treeOneRoot->rightChild, treeTwoRoot, 2);
    }
}

int main() {
    int inputValue;

    while (cin >> inputValue && inputValue != -1) {
        insertIntoBST(treeOneRoot, inputValue);
    }

    while (cin >> inputValue && inputValue != -1) {
        insertIntoBST(treeTwoRoot, inputValue);
    }

    mergeAndPrint(treeOneRoot, treeTwoRoot, -1);
    return 0;
}
